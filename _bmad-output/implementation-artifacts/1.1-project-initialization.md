# Story 1.1: Project Initialization & Data Models

Status: complete

<!-- Note: Validation is optional. Run validate-create-story for quality check before dev-story. -->

## Story

As a Developer,
I want to initialize the project and define the data structure,
so that I have a foundation for building the application features.

## Acceptance Criteria

1. **Given** The developer has the architecture document
2. **When** They run the initialization commands and create Mongoose schemas
3. **Then** A Next.js 15 project with Tailwind is running
4. **And** `Household` and `Guest` schemas are defined in TypeScript
5. **And** MongoDB connection logic is implemented in `/lib`

## Tasks / Subtasks

- [x] Initialize Next.js 15 Project (AC: 1, 3)
  - [x] Run `npx create-next-app@latest wedding --typescript --tailwind --eslint`
  - [x] Install dependencies: `npm install mongoose mongodb`
  - [x] Clean up default boilerplate (page.tsx, globals.css)
- [x] Implement Database Connection (AC: 5)
  - [x] Create `src/lib/db.ts` with Mongoose connection caching (follow Next.js best practices)
  - [x] Configure `MONGO_URI` in `.env.local`
- [x] Define Mongoose Schemas (AC: 2, 4)
  - [x] Create `src/models/Guest.ts` (Schema + Interface)
  - [x] Create `src/models/Household.ts` (Schema + Interface)
  - [x] Ensure strict typing for all fields
- [x] Set up Project Structure
  - [x] Create directory structure: `src/actions`, `src/lib`, `src/components`, `src/models`
  - [x] Set up `src/app/(admin)` and `src/app/(public)` groups

## Dev Notes

- **Starter Command**: `npx create-next-app@latest wedding --typescript --tailwind --eslint`
- **Stack**: Next.js 15 (App Router), Tailwind CSS, MongoDB + Mongoose v8.
- **Strict Mode**: Mongoose `strictQuery: true`, TypeScript `strict: true`.

### Project Structure Notes

- Follow the directory structure defined in `architecture.md`.
- `src/lib/db.ts` must handle hot-reload connections in development (global cache).
- `models` should be singleton-safe (check `mongoose.models.Name` before defining).

### References

- [Architecture: Data Modeling](file:///e:/WebDev/wedding/_bmad-output/planning-artifacts/architecture.md#Section-Data-Architecture)
- [Architecture: Project Structure](file:///e:/WebDev/wedding/_bmad-output/planning-artifacts/architecture.md#Section-Complete-Project-Directory-Structure)
- [Epics: Story 1.1](file:///e:/WebDev/wedding/_bmad-output/planning-artifacts/epics.md#Section-Story-1.1-Project-Initialization-Data-Models)

## Dev Agent Record

### Agent Model Used

Antigravity / BMM Dev Agent (Developer)

### Debug Log References

- N/A

### Completion Notes List

- ✅ Initialized Next.js 15 project with TypeScript, Tailwind CSS, and ESLint using `create-next-app@latest`
- ✅ Installed MongoDB dependencies: `mongoose`, `mongodb`, and `uuid` for token generation
- ✅ Created `src/lib/db.ts` with global connection caching to prevent connection pool overflow during hot reloads
- ✅ Implemented `Guest` Mongoose schema with strict TypeScript interfaces, validation rules, and hot-reload safety
- ✅ Implemented `Household` Mongoose schema with UUIDv4 token generation, indexed `inviteToken` field, and strict typing
- ✅ Created `.env.local` template with `MONGO_URI` and `ADMIN_KEY` placeholders
- ✅ Set up complete project directory structure: `src/actions`, `src/components`, `src/lib`, `src/models`
- ✅ Created route groups: `src/app/(admin)` and `src/app/(public)` for middleware-based auth separation
- ✅ Cleaned up Next.js boilerplate (simplified `page.tsx` and `globals.css`)
- ✅ Verified successful production build with `npm run build` (exit code 0)

## File List

### New Files
- `src/lib/db.ts` - MongoDB connection with global caching
- `src/models/Guest.ts` - Guest Mongoose schema and interface
- `src/models/Household.ts` - Household Mongoose schema with UUID tokens
- `.env.local` - Environment variables template

### Modified Files
- `package.json` - Added mongoose, mongodb, uuid dependencies
- `src/app/page.tsx` - Cleaned up boilerplate
- `src/app/globals.css` - Simplified to basic Tailwind import

### Created Directories
- `src/actions/`
- `src/components/`
- `src/lib/`
- `src/models/`
- `src/app/(admin)/admin/`
- `src/app/(public)/`

## Change Log

- **2026-01-16**: Story 1.1 completed - Project initialization with Next.js 15, MongoDB/Mongoose integration, and data models
